
(function(i){var m=(function(){function s(t){if(t){return r(t)}}function r(u){for(var t in s.prototype){u[t]=s.prototype[t]}return u}s.prototype.on=s.prototype.addEventListener=function(u,t){this._callbacks=this._callbacks||{};(this._callbacks["$"+u]=this._callbacks["$"+u]||[]).push(t);return this};s.prototype.once=function(v,u){function t(){this.off(v,t);u.apply(this,arguments)}t.fn=u;this.on(v,t);return this};s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(x,v){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var w=this._callbacks["$"+x];if(!w){return this}if(1==arguments.length){delete this._callbacks["$"+x];return this}var t;for(var u=0;u<w.length;u++){t=w[u];if(t===v||t.fn===v){w.splice(u,1);break}}return this};s.prototype.emit=function(x){this._callbacks=this._callbacks||{};var u=[].slice.call(arguments,1),w=this._callbacks["$"+x];if(w){w=w.slice(0);for(var v=0,t=w.length;v<t;++v){w[v].apply(this,u)}}return this};s.prototype.listeners=function(t){this._callbacks=this._callbacks||{};return this._callbacks["$"+t]||[]};s.prototype.hasListeners=function(t){return !!this.listeners(t).length};return s})();var l=function(t,v,u){var s=0;var r=t.length;var w=arguments.length==3?u:t[s++];while(s<r){w=v.call(null,w,t[s],++s,t)}return w};var n="undefined"==typeof i?(this||self):i;function o(){}function g(r){var s={}.toString.call(r);switch(s){case"[object File]":case"[object Blob]":case"[object FormData]":return true;default:return false}}f.getXHR=function(){if(n.XMLHttpRequest&&(!n.location||"file:"!=n.location.protocol||!n.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(r){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(r){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(r){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(r){}}return false};var d="".trim?function(r){return r.trim()}:function(r){return r.replace(/(^\s*|\s*$)/g,"")};function p(r){return r===Object(r)}function q(t){if(!p(t)){return t}var s=[];for(var r in t){if(null!=t[r]){s.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]))}}return s.join("&")}f.serializeObject=q;function j(x){var v={};var t=x.split("&");var u;var w;for(var s=0,r=t.length;s<r;++s){w=t[s];u=w.split("=");v[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return v}f.parseString=j;f.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};f.serialize={"application/x-www-form-urlencoded":q,"application/json":JSON.stringify};f.parse={"application/x-www-form-urlencoded":j,"application/json":JSON.parse};function h(w){var y=w.split(/\r?\n/);var t={};var v;var z;var x;var r;y.pop();for(var s=0,u=y.length;s<u;++s){z=y[s];v=z.indexOf(":");x=z.slice(0,v).toLowerCase();r=d(z.slice(v+1));t[x]=r}return t}function k(r){return r.split(/ *; */).shift()}function e(r){return l(r.split(/ *; */),function(u,w){var t=w.split(/ *= */),s=t.shift(),v=t.shift();if(s&&v){u[s]=v}return u},{})}function b(s,r){r=r||{};this.req=s;this.xhr=this.req.xhr;this.text=((this.req.method!="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text"))||typeof this.xhr.responseType==="undefined")?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;this.setStatusProperties(this.xhr.status);this.header=this.headers=h(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body=this.req.method!="HEAD"?this.parseBody(this.text?this.text:this.xhr.response):null}b.prototype.get=function(r){return this.header[r.toLowerCase()]};b.prototype.setHeaderProperties=function(u){var s=this.header["content-type"]||"";this.type=k(s);var t=e(s);for(var r in t){this[r]=t[r]}};b.prototype.parseBody=function(s){var r=f.parse[this.type];return r&&s&&(s.length||s instanceof Object)?r(s):null};b.prototype.setStatusProperties=function(r){if(r===1223){r=204}var s=r/100|0;this.status=r;this.statusType=s;this.info=1==s;this.ok=2==s;this.clientError=4==s;this.serverError=5==s;this.error=(4==s||5==s)?this.toError():false;this.accepted=202==r;this.noContent=204==r;this.badRequest=400==r;this.unauthorized=401==r;this.notAcceptable=406==r;this.notFound=404==r;this.forbidden=403==r};b.prototype.toError=function(){var t=this.req;var v=t.method;var r=t.url;var u="cannot "+v+" "+r+" ("+this.status+")";var s=new Error(u);s.status=this.status;s.method=v;s.url=r;return s};f.Response=b;function a(t,s){var r=this;m.call(this);this._query=this._query||[];this.method=t;this.url=s;this.header={};this._header={};this.on("end",function(){var v=null;var u=null;try{u=new b(r)}catch(x){v=new Error("Parser is unable to parse the response");v.parse=true;v.original=x;return r.callback(v)}r.emit("response",u);if(v){return r.callback(v,u)}if(u.status>=200&&u.status<300){return r.callback(v,u)}var w=new Error(u.statusText||"Unsuccessful HTTP response");w.original=v;w.response=u;w.status=u.status;r.callback(v||w,u)})}m(a.prototype);a.prototype.use=function(r){r(this);return this};a.prototype.timeout=function(r){this._timeout=r;return this};a.prototype.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};a.prototype.abort=function(){if(this.aborted){return}this.aborted=true;this.xhr.abort();this.clearTimeout();this.emit("abort");return this};a.prototype.set=function(s,t){if(p(s)){for(var r in s){this.set(r,s[r])}return this}this._header[s.toLowerCase()]=t;this.header[s]=t;return this};a.prototype.unset=function(r){delete this._header[r.toLowerCase()];delete this.header[r];return this};a.prototype.getHeader=function(r){return this._header[r.toLowerCase()]};a.prototype.type=function(r){this.set("Content-Type",f.types[r]||r);return this};a.prototype.accept=function(r){this.set("Accept",f.types[r]||r);return this};a.prototype.auth=function(r,s){var t=btoa(r+":"+s);this.set("Authorization","Basic "+t);return this};a.prototype.query=function(r){if("string"!=typeof r){r=q(r)}if(r){this._query.push(r)}return this};a.prototype.field=function(r,s){if(!this._formData){this._formData=new n.FormData()}this._formData.append(r,s);return this};a.prototype.attach=function(t,s,r){if(!this._formData){this._formData=new n.FormData()}this._formData.append(t,s,r);return this};a.prototype.send=function(t){var u=p(t);var s=this.getHeader("Content-Type");if(u&&p(this._data)){for(var r in t){this._data[r]=t[r]}}else{if("string"==typeof t){if(!s){this.type("form")}s=this.getHeader("Content-Type");if("application/x-www-form-urlencoded"==s){this._data=this._data?this._data+"&"+t:t}else{this._data=(this._data||"")+t}}else{this._data=t}}if(!u||g(t)){return this}if(!s){this.type("json")}return this};a.prototype.callback=function(t,r){var s=this._callback;this.clearTimeout();s(t,r)};a.prototype.crossDomainError=function(){var r=new Error("Origin is not allowed by Access-Control-Allow-Origin");r.crossDomain=true;this.callback(r)};a.prototype.timeoutError=function(){var s=this._timeout;var r=new Error("timeout of "+s+"ms exceeded");r.timeout=s;this.callback(r)};a.prototype.withCredentials=function(){this._withCredentials=true;return this};a.prototype.end=function(v){var z=this;var y=this.xhr=f.getXHR();var t=this._query.join("&");var u=this._timeout;var r=this._formData||this._data;this._callback=v||o;y.onreadystatechange=function(){if(4!=y.readyState){return}var B;try{B=y.status}catch(C){B=0}if(0==B){if(z.timedout){return z.timeoutError()}if(z.aborted){return}return z.crossDomainError()}z.emit("end")};var x=function(B){if(B.total>0){B.percent=B.loaded/B.total*100}z.emit("progress",B)};if(this.hasListeners("progress")){y.onprogress=x}try{if(y.upload&&this.hasListeners("progress")){y.upload.onprogress=x}}catch(s){}if(u&&!this._timer){this._timer=setTimeout(function(){z.timedout=true;z.abort()},u)}if(t){t=f.serializeObject(t);this.url+=~this.url.indexOf("?")?"&"+t:"?"+t}y.open(this.method,this.url,true);if(this._withCredentials){y.withCredentials=true}if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!g(r)){var A=f.serialize[this.getHeader("Content-Type")];if(A){r=A(r)}}for(var w in this.header){if(null==this.header[w]){continue}y.setRequestHeader(w,this.header[w])}this.emit("request",this);y.send(r);return this};f.Request=a;function f(s,r){if("function"==typeof r){return new a("GET",s).end(r)}if(1==arguments.length){return new a("GET",s)}return new a(s,r)}f.get=function(r,u,s){var t=f("GET",r);if("function"==typeof u){s=u,u=null}if(u){t.query(u)}if(s){t.end(s)}return t};f.head=function(r,u,s){var t=f("HEAD",r);if("function"==typeof u){s=u,u=null}if(u){t.send(u)}if(s){t.end(s)}return t};f.del=function(r,s){var t=f("DELETE",r);if(s){t.end(s)}return t};f.patch=function(r,u,s){var t=f("PATCH",r);if("function"==typeof u){s=u,u=null}if(u){t.send(u)}if(s){t.end(s)}return t};f.post=function(r,u,s){var t=f("POST",r);if("function"==typeof u){s=u,u=null}if(u){t.send(u)}if(s){t.end(s)}return t};f.put=function(r,u,s){var t=f("PUT",r);if("function"==typeof u){s=u,u=null}if(u){t.send(u)}if(s){t.end(s)}return t};var c=c||{};c.exports=f;i.request=f})(window);